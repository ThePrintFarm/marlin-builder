name: Build Creality firmwares

on:
  push:
    branches:
      - "main"
    paths:
      - builder.sh
      - configs/Creality/**

jobs:
  build:
    strategy:
      matrix:
        parent:
          - Creality
        model:
          - CR-10_V3
          - CR-30_PrintMill
          - Ender-2
          - Ender-3
        branch:
          - bugfix-2.0.x
          - bugfix-2.1.x
        board:
          - oem
        include:
          - board: btt-skr-mini-e3-v2
            model: Ender-3
    uses: ./.github/workflows/build.yaml
    with:
      prefix: creality
      parent: ${{ matrix.parent }}
      model: ${{ matrix.model }}
      branch: ${{ matrix.branch }}
      board: ${{ matrix.board }}
